## Способы защиты при добавлении, обработке, передаче персональных данных

1. Установка шифрования все соединений по которым идет передача данных при помощи SSL/TLS.
2. Местом для хранения персональных данных вместо файлов Excel будем использовать базу данных PosgreSQL, так как у нас есть разработчики имеющие опыт. Всем кроме администратора системы запрещаем примой доступ к таблицам.
3. Доступ к персональным данным будет через систему "Портал компании" на основе заданных ролей и допусков. Для входа в систему необходимо пройти авторизацию
4. Всем кроме администратора системы запрещаем доступ к файлам базы данных 1С. Вся работа с данными исключительно через приложения "1C Бухгалтерия предприятия" и "1C Торговля и склад" 
5. Использовать мониторинг для осуществления контроля доступа и прямого изменения файлов баз данных.
6. При добавлении персональных данных в систему необходимо, чтобы у пациента была возможность подтверждать согласие на обработку персональных данных.

## Новые компоненты системы "Портал компании"

1. Приложение "Портал компании FrontEnd" -  веб приложение написанное с использование JavaScript + React. Пациенты и сотрудники "Медикаменте" подключается к этому приложению и имеют права доступа в зависимости от настроенных ролей. Таблица ролей описана ниже.
2  Приложение "Портал компании BackEnd" - приложение для работы с данными пациентов, написанное на Java в описан алгоритм обработки данных с учетом ролей и допусков. Необходимо написать приложение с учетом возможности горизонтально масштабирования, чтобы в дальнейшем использовать Kubernatis при увеличении объемов.
3. База данных портала "PosgreSQL", данные в которой изменяются только при помощи "Портал компании BackEnd".
4. Система отправки сообщений. Считаю, что в MVP нужно использовать внешнюю систему оповещений через SMS, так как первоначально не планируются большие объемы. Тексты сообщений формируются в "Портал компании BackEnd" и затем через "Система отправки сообщений", с использованием  Kafka, асинхронно передаются на внешнюю систему
5. Система мониторинга. Систему организуем на основе ELK стека. Система мониторинга будет собирать данные о событиях файловой системы, анализировать, визуализировать и оповещать об изменениях. 

## Хранение персональных данных

Персональные данные хранятся в этой базе в зашифрованном виде, которые расшифровываются при помощи алгоритмов зашитых в "Портал компании BackEnd" и ключей шифрования. Остальные данные хранятся без шифрования и содержат только id персоны по которому извлекаются персональные данные. Прямого доступа к таблицам нет, данные вызываются через хранимые процедуры, выполнение которых связана с настройкой ролей.

### В базу данных переносится информация из excel файлов следующих хранилищ данных:

1. Информация о пациенте
2. Журнал регистрации пациентов
3. Файлы данных пациентов. Файлы пациентов мы не будем хранить в базе данных, а только ссылким на эти файлы, которые будут работать только для пользователей имеющих права на эти файлы. Сами файлы хранятся в файлов хранилище, к которому нет прямого доступа
4. Реестр анализов

### Периоды и условия уничтожения персональных данных после обработки

1. Персональные данных хранятся в базе и в кэше в зашифрованном виде. После их расшифровки и обработки необходимо стирать расшифрованные данные
2. Пациент может в любой момент удалить или изменить свои личные данные через веб-приложение
3. Срок хранения персональных данных зависит от пациента. Если он разрывает договор с компанией, его персональные данные удаляются. Иначе они хранятся бессрочно.

## Таблица ролей доступа пользователей системы

|**Пользователь**|**Роли**|**Доступ**|**Ограничения**|
| :-: | :- | :- | :- |
|Системный администратор| Администратор| Чтение/Запись/Удаление |Администратор системы имеет полный доступ к зашифрованным данным, но не имеет возможности их расшифровать|
|Пациент| Пользователь| Чтение/Запись/Удаление |Пользователь может производить действия только со своими данными|
|Сотрудник ресепшен| Ресепшен | Чтение/Запись/Удаление |Сотрудник ресепшен  может записывать и удалять только добавленные им данные (случай регистрации пациента по телефону), остальные данные оп может только прочитать с учетом допуска к определенным полям не содержащим врачебную тайну.|
|Врач| Мед. персонал | Чтение/Запись/Удаление |Врач может читать удалять и добавлять только данные связанные с врачебной тайной.  Из данных пациента, читать только ФИО пациента, дату рождения и его анализы.|
|Бухгалтер| Бухгалтерия | Чтение |Бухгалтер может читать данные пациента, необходимые для бухгалтерского учета и отчетности.|
|Сотрудник склада| Склад | Нет доступа ||
|Бухгалтер| Бухгалтерия | Чтение |Бухгалтер может читать данные пациента, необходимые для бухгалтерского учета и отчетности.|
|Кассир| Бухгалтерия | Запись |Кассир имеет доступ к данным связанным с оплатой. После оплаты кассовая машина автоматически отправляет данные об успешном платеже|